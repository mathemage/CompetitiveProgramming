<html><body bgcolor="#000000" text="#ffffff"><table><tr><td colspan="2"><h3>Problem Statement</h3></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><p>
One of the challenges <i> before </i> marriage (yes, this problem is a bit different from the others in that regard!) is circling. 
By circling, we mean love circles.
The ideal situation in love is when A loves B and B loves A back, as then A and B can get married and be happy together.
However, in real life you can get much more complicated situations such as "A loves B, B loves C, C loves D, ..., and X loves A".
We will take a closer look at those situations.
</p>
<p>
Imagine a society in which no ideal love circles exist, for a very simple reason:
for any two people A, B in the society <i>either</i> A loves B, <i>or</i> B loves A, <i>but never both</i>.
</p>
<p>
We are examining one such society.
We are currently interested in situations that are in some sense closest to the ideal one: love circles that involve <i>exactly four</i> people.
That is, we are interested in four-tuples (A, B, C, D) of distinct people such that A loves B, B loves C, C loves D, and finally D loves A.
The cyclic order does not matter, so (B, C, D, A) is the same four-tuple as (A, B, C, D).
</p>
<p>
You are given <b>N</b>, <b>threshold</b> and <b>state</b>.
The society we are examining consists of <b>N</b> people, numbered from 0 to <b>N</b>-1.
Use the following simple pseudocode to generate the relationships between them.
</p>

<pre>

def rnd():
    state = (state * 1103515245 + 12345) modulo 2^31
    return state modulo 100

for i = 0 to N-1:
    for j = i+1 to N-1:
        if rnd() &lt; threshold:
            i loves j
        else:
            j loves i
</pre>
<p>
Calculate and return the number of <i>distinct</i> love circles that involve <i>exactly four</i> people.
</p></td></tr><tr><td colspan="2"><h3>Definition</h3></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td>Class:</td><td>MarriageAndCirclingChallenge</td></tr><tr><td>Method:</td><td>solve</td></tr><tr><td>Parameters:</td><td>int, int, int</td></tr><tr><td>Returns:</td><td>long long</td></tr><tr><td>Method signature:</td><td>long long solve(int N, int threshold, int state)</td></tr><tr><td colspan="2">(be sure your method is public)</td></tr></table></td></tr><tr><td colspan="2"><h3>Limits</h3></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td>Time limit (s):</td><td>2.000</td></tr><tr><td>Memory limit (MB):</td><td>256</td></tr></table></td></tr><tr><td colspan="2"><h3>Constraints</h3></td></tr><tr><td align="center" valign="top">-</td><td><b>N</b> will be between 4 and 600, inclusive.</td></tr><tr><td align="center" valign="top">-</td><td><b>threshold</b> will be between 0 and 100, inclusive.</td></tr><tr><td align="center" valign="top">-</td><td><b>state</b> will be between 0 and 2^31 - 1, inclusive.</td></tr><tr><td colspan="2"><h3>Examples</h3></td></tr><tr><td align="center" nowrap="true">0)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>10</pre></td></tr><tr><td><pre>0</pre></td></tr><tr><td><pre>12345</pre></td></tr></table></td></tr><tr><td><pre>Returns: 0</pre></td></tr><tr><td><table><tr><td colspan="2">In this society the test rnd() &lt; <b>threshold</b> never returns true and therefore the person with the higher number always loves the person with the smaller number. In such a society there clearly are no love circles at all, regardless of their length.</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">1)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>5</pre></td></tr><tr><td><pre>50</pre></td></tr><tr><td><pre>47</pre></td></tr></table></td></tr><tr><td><pre>Returns: 4</pre></td></tr><tr><td><table><tr><td colspan="2"><p>
The values returned by rnd() when generating this society are:
8
(0 loves 1),
5
(0 loves 2),
98
(3 loves 0),
91
(4 loves 0),
48
(1 loves 2),
33
(1 loves 3),
50
(4 loves 1),
27
(2 loves 3),
76
(4 loves 2),
37
(3 loves 4).
</p>
<p>
The four love circles of length four in this society are (0, 1, 2, 3), (0, 1, 3, 4), (1, 2, 3, 4), and (3, 4, 0, 2).
</p></td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">2)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>9</pre></td></tr><tr><td><pre>20</pre></td></tr><tr><td><pre>1234567</pre></td></tr></table></td></tr><tr><td><pre>Returns: 29</pre></td></tr><tr><td><table><tr><td colspan="2"></td></tr></table></td></tr></table></td></tr></table><p>This problem statement is the exclusive and proprietary property of TopCoder, Inc.  Any unauthorized use or reproduction of this information without the prior written consent of TopCoder, Inc. is strictly prohibited.  (c)2003, TopCoder, Inc.  All rights reserved.  </p></body></html>